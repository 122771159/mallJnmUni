{"version":3,"file":"index.js","sources":["stores/index.js"],"sourcesContent":["import { ref, computed } from \"vue\";\nimport { defineStore } from \"pinia\";\n\nexport const useAdminStore = defineStore(\"admin\", () => {\n  const token = ref(uni.getStorageSync(\"token\") || \"\");\n  const roles = ref(uni.getStorageSync(\"roles\") || \"\");\n  const userInfo = ref(uni.getStorageSync(\"userInfo\") || \"\");\n  function setToken(token_) {\n    token_ = \"Bearer \" + token_;\n    localStorage.setItem(\"token\", token_);\n    token.value = token_;\n  }\n  function setRoles(roles_) {\n    localStorage.setItem(\"roles\", roles_);\n    roles.value = roles_;\n  }\n  function setUserInfo(userInfo_) {\n    userInfo_ = JSON.stringify(userInfo_);\n    userInfo.value = userInfo_;\n    localStorage.setItem(\"userInfo\", userInfo_);\n  }\n  function logout() {\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"roles\");\n    localStorage.removeItem(\"userInfo\");\n    token.value = \"\";\n    roles.value = \"\";\n  }\n  const isLogin = computed(() => token.value !== \"\");\n  const getToken = computed(() => token.value);\n  const getRoles = computed(() => JSON.parse(roles.value));\n  const isAdmin = computed(() => {\n    return getRoles.value.some((role) => role.includes(\"ADMIN\"));\n  });\n  const getUserInfo = computed(() => JSON.parse(userInfo.value));\n  return {\n    getToken,\n    getRoles,\n    setToken,\n    setRoles,\n    logout,\n    setUserInfo,\n    isLogin,\n    isAdmin,\n    getUserInfo,\n  };\n});\n"],"names":["defineStore","ref","uni","computed"],"mappings":";;AAGY,MAAC,gBAAgBA,cAAAA,YAAY,SAAS,MAAM;AACtD,QAAM,QAAQC,cAAAA,IAAIC,cAAG,MAAC,eAAe,OAAO,KAAK,EAAE;AACnD,QAAM,QAAQD,cAAAA,IAAIC,cAAG,MAAC,eAAe,OAAO,KAAK,EAAE;AACnD,QAAM,WAAWD,cAAAA,IAAIC,cAAG,MAAC,eAAe,UAAU,KAAK,EAAE;AACzD,WAAS,SAAS,QAAQ;AACxB,aAAS,YAAY;AACrB,iBAAa,QAAQ,SAAS,MAAM;AACpC,UAAM,QAAQ;AAAA,EACf;AACD,WAAS,SAAS,QAAQ;AACxB,iBAAa,QAAQ,SAAS,MAAM;AACpC,UAAM,QAAQ;AAAA,EACf;AACD,WAAS,YAAY,WAAW;AAC9B,gBAAY,KAAK,UAAU,SAAS;AACpC,aAAS,QAAQ;AACjB,iBAAa,QAAQ,YAAY,SAAS;AAAA,EAC3C;AACD,WAAS,SAAS;AAChB,iBAAa,WAAW,OAAO;AAC/B,iBAAa,WAAW,OAAO;AAC/B,iBAAa,WAAW,UAAU;AAClC,UAAM,QAAQ;AACd,UAAM,QAAQ;AAAA,EACf;AACD,QAAM,UAAUC,cAAAA,SAAS,MAAM,MAAM,UAAU,EAAE;AACjD,QAAM,WAAWA,cAAQ,SAAC,MAAM,MAAM,KAAK;AAC3C,QAAM,WAAWA,cAAAA,SAAS,MAAM,KAAK,MAAM,MAAM,KAAK,CAAC;AACvD,QAAM,UAAUA,cAAAA,SAAS,MAAM;AAC7B,WAAO,SAAS,MAAM,KAAK,CAAC,SAAS,KAAK,SAAS,OAAO,CAAC;AAAA,EAC/D,CAAG;AACD,QAAM,cAAcA,cAAAA,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,CAAC;AAC7D,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AACA,CAAC;;"}