{"version":3,"file":"index.js","sources":["stores/index.js"],"sourcesContent":["import { ref, computed } from \"vue\";\nimport { defineStore } from \"pinia\";\n\nexport const useUserStore = defineStore(\"user\", () => {\n  const token = ref(uni.getStorageSync(\"token\") || \"\");\n  const roles = ref(uni.getStorageSync(\"roles\") || \"\");\n  const userInfo = ref(uni.getStorageSync(\"userInfo\") || \"\");\n  function setToken(token_) {\n    token_ = \"Bearer \" + token_;\n    uni.setStorageSync(\"token\", token_);\n    token.value = token_;\n  }\n  function setRoles(roles_) {\n    uni.setStorageSync(\"roles\", roles_);\n    roles.value = roles_;\n  }\n  function setUserInfo(userInfo_) {\n    userInfo_ = JSON.stringify(userInfo_);\n    userInfo.value = userInfo_;\n    uni.setStorageSync(\"userInfo\", userInfo_);\n  }\n  function logout() {\n    uni.removeStorageSync(\"token\");\n    uni.removeStorageSync(\"roles\");\n    uni.removeStorageSync(\"userInfo\");\n    token.value = \"\";\n    roles.value = \"\";\n    userInfo.value = {};\n  }\n  const isLogin = computed(() => token.value !== \"\");\n  const getToken = computed(() => token.value);\n  const getRoles = computed(() => roles.value);\n  const isSales = computed(() => {\n    return roles.value.includes(\"SALES\");\n  });\n  const getUserInfo = computed(() => JSON.parse(userInfo.value));\n  return {\n    getToken,\n    getRoles,\n    setToken,\n    setRoles,\n    logout,\n    setUserInfo,\n    isLogin,\n    isSales,\n    getUserInfo,\n  };\n});\n"],"names":["defineStore","ref","uni","computed"],"mappings":";;AAGY,MAAC,eAAeA,cAAAA,YAAY,QAAQ,MAAM;AACpD,QAAM,QAAQC,cAAAA,IAAIC,cAAG,MAAC,eAAe,OAAO,KAAK,EAAE;AACnD,QAAM,QAAQD,cAAAA,IAAIC,cAAG,MAAC,eAAe,OAAO,KAAK,EAAE;AACnD,QAAM,WAAWD,cAAAA,IAAIC,cAAG,MAAC,eAAe,UAAU,KAAK,EAAE;AACzD,WAAS,SAAS,QAAQ;AACxB,aAAS,YAAY;AACrBA,kBAAAA,MAAI,eAAe,SAAS,MAAM;AAClC,UAAM,QAAQ;AAAA,EACf;AACD,WAAS,SAAS,QAAQ;AACxBA,kBAAAA,MAAI,eAAe,SAAS,MAAM;AAClC,UAAM,QAAQ;AAAA,EACf;AACD,WAAS,YAAY,WAAW;AAC9B,gBAAY,KAAK,UAAU,SAAS;AACpC,aAAS,QAAQ;AACjBA,kBAAAA,MAAI,eAAe,YAAY,SAAS;AAAA,EACzC;AACD,WAAS,SAAS;AAChBA,wBAAI,kBAAkB,OAAO;AAC7BA,wBAAI,kBAAkB,OAAO;AAC7BA,wBAAI,kBAAkB,UAAU;AAChC,UAAM,QAAQ;AACd,UAAM,QAAQ;AACd,aAAS,QAAQ;EAClB;AACD,QAAM,UAAUC,cAAAA,SAAS,MAAM,MAAM,UAAU,EAAE;AACjD,QAAM,WAAWA,cAAQ,SAAC,MAAM,MAAM,KAAK;AAC3C,QAAM,WAAWA,cAAQ,SAAC,MAAM,MAAM,KAAK;AAC3C,QAAM,UAAUA,cAAAA,SAAS,MAAM;AAC7B,WAAO,MAAM,MAAM,SAAS,OAAO;AAAA,EACvC,CAAG;AACD,QAAM,cAAcA,cAAAA,SAAS,MAAM,KAAK,MAAM,SAAS,KAAK,CAAC;AAC7D,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACJ;AACA,CAAC;;"}