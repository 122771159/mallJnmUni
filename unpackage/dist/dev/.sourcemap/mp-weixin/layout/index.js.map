{"version":3,"file":"index.js","sources":["layout/index.vue","/Users/lijinmu/Documents/HBuilderProjects/mallJnmUni/layout/index.vue?type=component"],"sourcesContent":["<template>\r\n  <view>\r\n    <uv-navbar :title=\"title\" :placeholder=\"true\">\r\n      <template v-slot:left>\r\n        <slot name=\"layout-left\">\r\n          <view class=\"uv-nav-slot\" v-if=\"!hiddenAllStrong\">\r\n            <uv-icon\r\n              name=\"arrow-left\"\r\n              size=\"24\"\r\n              @click=\"leftClick\"\r\n              v-if=\"getIsHiidenLeft()\"\r\n            ></uv-icon>\r\n            <uv-line\r\n              direction=\"column\"\r\n              :hairline=\"false\"\r\n              length=\"20\"\r\n              margin=\"0 8px\"\r\n              v-if=\"getIsHiidenCenter()\"\r\n            ></uv-line>\r\n            <uv-icon\r\n              name=\"home\"\r\n              size=\"24\"\r\n              @click=\"bacHome\"\r\n              v-if=\"getIsHiidenRight()\"\r\n            ></uv-icon>\r\n          </view>\r\n        </slot>\r\n      </template>\r\n      <template v-slot:center>\r\n        <slot name=\"layout-center\">\r\n          <text style=\"font-size: 16px; font-weight: bold\" v-if=\"title\">{{\r\n            title\r\n          }}</text>\r\n        </slot>\r\n      </template>\r\n    </uv-navbar>\r\n    <uv-toast ref=\"toastRef\"></uv-toast>\r\n    <slot></slot>\r\n  </view>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted } from \"vue\";\r\nconst prop = defineProps({\r\n  title: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  leftClick: {\r\n    type: Function,\r\n    default: () => {\r\n      uni.navigateBack();\r\n    },\r\n  },\r\n  hiddenLeftStrong: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  hiddenRightStrong: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n  hiddenAllStrong: {\r\n    type: Boolean,\r\n    default: false,\r\n  },\r\n});\r\nconst navigationSource = ref();\r\n\r\n// false 代表隐藏\r\nconst getIsHiidenLeft = () => {\r\n  if (prop.hiddenAllStrong) return false;\r\n  if (prop.hiddenLeftStrong) return false;\r\n  if (navigationSource.value == \"reLaunch\") return false;\r\n  return true;\r\n};\r\nconst getIsHiidenRight = () => {\r\n  if (prop.hiddenAllStrong) return false;\r\n  if (prop.hiddenRightStrong) return false;\r\n  return true;\r\n};\r\nconst getIsHiidenCenter = () => {\r\n  if (getIsHiidenLeft() && getIsHiidenRight()) return true;\r\n  return false;\r\n};\r\nconst toastRef = ref(null);\r\nconst handleShowToast = (params) => {\r\n  if (toastRef.value) {\r\n    toastRef.value.show({\r\n      ...params,\r\n    });\r\n  }\r\n};\r\nconst hide = () => {\r\n  if (toastRef.value) {\r\n    toastRef.value.hide();\r\n  }\r\n};\r\nconst bacHome = () => {\r\n  uni.reLaunch({\r\n    url: \"/pages/user/user\",\r\n  });\r\n};\r\nonLoad(() => {\r\n  const pages = getCurrentPages();\r\n  const pageStackLength = pages.length;\r\n  console.log(\"当前页面栈层级:\", pageStackLength);\r\n  // console.log('当前页面路由:', this.route); // 获取当前页面路由\r\n\r\n  if (pageStackLength === 1) {\r\n    navigationSource.value = \"reLaunch\";\r\n    console.log(\"此页面可能是通过 uni.reLaunch 打开，或者是应用的初始启动页。\");\r\n    // 在这里执行针对 reLaunch 的逻辑\r\n    // 例如：可能不显示返回按钮，或者需要加载完整数据\r\n  } else if (pageStackLength > 1) {\r\n    navigationSource.value = \"navigateTo\";\r\n    console.log(\"此页面可能是通过 uni.navigateTo 打开。\");\r\n    // 在这里执行针对 navigateTo 的逻辑\r\n    // 例如：显示返回按钮，或者从上一页获取参数进行增量更新\r\n  } else {\r\n    // 理论上 pageStackLength 至少为 1 (当前页面本身)\r\n    console.warn(\"获取页面栈层级异常!\");\r\n  }\r\n});\r\nonMounted(() => {\r\n  uni.$on(\"show-toast\", handleShowToast);\r\n  uni.$on(\"hide-toast\", hide);\r\n});\r\n\r\nonUnmounted(() => {\r\n  uni.$off(\"show-toast\", handleShowToast);\r\n  uni.$off(\"hide-toast\", hide);\r\n});\r\n</script>\r\n<style scoped lang=\"scss\">\r\n@mixin flex($direction: row) {\r\n  /* #ifndef APP-NVUE */\r\n  display: flex;\r\n  /* #endif */\r\n  flex-direction: $direction;\r\n}\r\n\r\n.uv-nav-slot {\r\n  @include flex;\r\n  border-style: solid;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  border-width: 0.5px;\r\n  border-radius: 100px;\r\n  border-color: #dadbde;\r\n  padding: 3px 7px;\r\n  opacity: 0.8;\r\n}\r\n</style>\r\n","import Component from '/Users/lijinmu/Documents/HBuilderProjects/mallJnmUni/layout/index.vue'\nwx.createComponent(Component)"],"names":["ref","uni","onLoad","onMounted","onUnmounted"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,UAAM,OAAO;AAwBb,UAAM,mBAAmBA,cAAG,IAAA;AAG5B,UAAM,kBAAkB,MAAM;AAC5B,UAAI,KAAK;AAAiB,eAAO;AACjC,UAAI,KAAK;AAAkB,eAAO;AAClC,UAAI,iBAAiB,SAAS;AAAY,eAAO;AACjD,aAAO;AAAA,IACT;AACA,UAAM,mBAAmB,MAAM;AAC7B,UAAI,KAAK;AAAiB,eAAO;AACjC,UAAI,KAAK;AAAmB,eAAO;AACnC,aAAO;AAAA,IACT;AACA,UAAM,oBAAoB,MAAM;AAC9B,UAAI,gBAAiB,KAAI,iBAAkB;AAAE,eAAO;AACpD,aAAO;AAAA,IACT;AACA,UAAM,WAAWA,cAAAA,IAAI,IAAI;AACzB,UAAM,kBAAkB,CAAC,WAAW;AAClC,UAAI,SAAS,OAAO;AAClB,iBAAS,MAAM,KAAK;AAAA,UAClB,GAAG;AAAA,QACT,CAAK;AAAA,MACF;AAAA,IACH;AACA,UAAM,OAAO,MAAM;AACjB,UAAI,SAAS,OAAO;AAClB,iBAAS,MAAM;MAChB;AAAA,IACH;AACA,UAAM,UAAU,MAAM;AACpBC,oBAAAA,MAAI,SAAS;AAAA,QACX,KAAK;AAAA,MACT,CAAG;AAAA,IACH;AACAC,kBAAAA,OAAO,MAAM;AACX,YAAM,QAAQ;AACd,YAAM,kBAAkB,MAAM;AAC9BD,oBAAA,MAAA,MAAA,OAAA,2BAAY,YAAY,eAAe;AAGvC,UAAI,oBAAoB,GAAG;AACzB,yBAAiB,QAAQ;AACzBA,sBAAAA,MAAA,MAAA,OAAA,2BAAY,uCAAuC;AAAA,MAGvD,WAAa,kBAAkB,GAAG;AAC9B,yBAAiB,QAAQ;AACzBA,sBAAAA,MAAA,MAAA,OAAA,2BAAY,6BAA6B;AAAA,MAG7C,OAAS;AAELA,sBAAAA,+CAAa,YAAY;AAAA,MAC1B;AAAA,IACH,CAAC;AACDE,kBAAAA,UAAU,MAAM;AACdF,oBAAAA,MAAI,IAAI,cAAc,eAAe;AACrCA,oBAAAA,MAAI,IAAI,cAAc,IAAI;AAAA,IAC5B,CAAC;AAEDG,kBAAAA,YAAY,MAAM;AAChBH,oBAAAA,MAAI,KAAK,cAAc,eAAe;AACtCA,oBAAAA,MAAI,KAAK,cAAc,IAAI;AAAA,IAC7B,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnID,GAAG,gBAAgB,SAAS;"}