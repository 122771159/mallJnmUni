{"version":3,"file":"user.js","sources":["pages/user/user.vue","pages/user/user.vue?type=page"],"sourcesContent":["<template>\n  <layout title=\"我的\" hiddenLeft>\n    <view\n      class=\"user-page-container\"\n      :style=\"{\n        minHeight: 'calc(100vh - ' + topHeight + 'px - ' + bottomHeight + 'px)',\n      }\"\n    >\n      <view class=\"user-header-card\">\n        <view class=\"user-info\">\n          <image class=\"avatar\" :src=\"avatarUrl\" mode=\"aspectFill\"></image>\n          <view class=\"username\">{{ username }}</view>\n          <view class=\"user-type\">\n            <uv-icon name=\"level\" size=\"14\" color=\"#f9ae3d\"></uv-icon>\n            <text class=\"user-type-text\">{{ userType }}</text>\n          </view>\n        </view>\n        <view v-if=\"isLoggedIn\" class=\"member-center-link\" @click=\"logout\">\n          退出登录\n          <uv-icon name=\"arrow-right\" size=\"14\" color=\"#909399\"></uv-icon>\n        </view>\n        <view v-if=\"!isLoggedIn\" class=\"member-center-link\" @click=\"goToLogin\">\n          点击登录\n          <uv-icon name=\"arrow-right\" size=\"14\" color=\"#909399\"></uv-icon>\n        </view>\n        <!-- <view class=\"user-stats\">\n          <view v-for=\"(stat, index) in stats\" :key=\"index\" class=\"stat-item\">\n            <text class=\"stat-value\">{{ stat.value }}</text>\n            <text class=\"stat-label\">{{ stat.label }}</text>\n          </view>\n        </view> -->\n      </view>\n\n      <view class=\"membership-banner-card\">\n        <view class=\"membership-info\">\n          <uv-icon name=\"level\" size=\"20\" color=\"#f9ae3d\"></uv-icon>\n          <text class=\"membership-title\">至尊会员</text>\n          <text class=\"membership-perks\">全年尊享6大权益</text>\n        </view>\n        <button class=\"upgrade-button\" size=\"mini\" @click=\"goToUpgrade\">\n          去升级\n        </button>\n      </view>\n\n      <!-- <view class=\"section-card\">\n        <uv-grid :col=\"5\" :border=\"true\">\n          <uv-grid-item\n            v-for=\"(item, index) in mainActions\"\n            :key=\"index\"\n            @click=\"handleActionClick(item)\"\n          >\n            <uv-icon\n              :customStyle=\"{ paddingTop: 20 + 'rpx' }\"\n              :name=\"item.icon\"\n              :custom-prefix=\"item.customPrefix\"\n              size=\"28\"\n              :color=\"item.iconColor || '#333'\"\n            ></uv-icon>\n            <text class=\"grid-text\">{{ item.text }}</text>\n          </uv-grid-item>\n        </uv-grid>\n      </view> -->\n\n      <view class=\"section-card\">\n        <view class=\"section-title-bar\">\n          <text class=\"section-title\">支付发票</text>\n        </view>\n        <uv-grid :col=\"5\" :border=\"false\">\n          <uv-grid-item\n            v-for=\"(item, index) in paymentActions\"\n            :key=\"index\"\n            @click=\"handleActionClick(item)\"\n          >\n            <uv-icon\n              :name=\"item.icon\"\n              :custom-prefix=\"item.customPrefix\"\n              size=\"28\"\n              :color=\"item.iconColor || '#333'\"\n            ></uv-icon>\n            <text class=\"grid-text\">{{ item.text }}</text>\n          </uv-grid-item>\n        </uv-grid>\n      </view>\n    </view>\n  </layout>\n  <my-tabber value=\"account\"></my-tabber>\n</template>\n\n<script setup>\nimport { ref, computed } from \"vue\";\nimport { useUserStore } from \"@/stores\";\nconst userStore = useUserStore();\nconst isLoggedIn = computed(() => userStore.isLogin);\nconst currentUser = computed(() => userStore.getUserInfo);\nconst userRoles = computed(() => userStore.getRoles);\nconst topHeight = uni.$com.getHeight().topHeight;\nconst bottomHeight = uni.$com.getHeight().bottomHeight;\n\nconst username = computed(() => {\n  if (isLoggedIn.value) {\n    return currentUser.value?.name || \"未登录\"; // 对接Pinia后使用\n  }\n  return \"未登录\";\n});\nconst userType = computed(() => {\n  if (isLoggedIn.value) {\n    if (userRoles.value.includes(\"SALES\")) {\n      return \"业务员\";\n    } else if (userRoles.value.includes(\"CUSTOMER\")) {\n      return \"普通客户\";\n    } else {\n      return \"未登录\";\n    }\n  }\n  return \"请先登录\";\n});\nconst avatarUrl = \"/static/images/default-avatar.png\";\n// --- 临时状态结束 ---\n\n// const stats = ref([\n//   { value: 0, label: \"积分\" },\n//   { value: 0, label: \"优惠券\" },\n//   { value: 0, label: \"卡余额\" },\n//   { value: 0, label: \"我的奖品\" },\n//   { value: 0, label: \"碳能量\" },\n// ]);\n\n// const mainActions = ref([\n//   { icon: \"car\", text: \"我的快递\", path: \"/pages/my-express/my-express\" },\n//   { icon: \"map\", text: \"地址薄\", path: \"/pages/address-book/address-book\" },\n//   { icon: \"setting\", text: \"偏好设置\", path: \"/pages/preferences/preferences\" },\n//   {\n//     icon: \"server-man\",\n//     customPrefix: \"uvicon\",\n//     text: \"专属快递员\",\n//     path: \"/pages/exclusive-courier/exclusive-courier\",\n//   }, // 假设uv-ui有此图标\n//   { icon: \"scan\", text: \"签收码\", path: \"/pages/sign-code/sign-code\" },\n//   {\n//     icon: \"server-man\",\n//     text: \"客服中心\",\n//     path: \"/pages/customer-service/customer-service\",\n//   },\n//   {\n//     icon: \"search\",\n//     text: \"服务查询\",\n//     path: \"/pages/service-query/service-query\",\n//   },\n//   {\n//     icon: \"calendar\",\n//     text: \"我的月报\",\n//     path: \"/pages/monthly-report/monthly-report\",\n//   },\n//   {\n//     icon: \"server-fill\",\n//     text: \"通关服务\",\n//     path: \"/pages/customs-clearance/customs-clearance\",\n//   }, // 假设uv-ui有此图标\n//   {\n//     icon: \"file-text\",\n//     text: \"行业模板库\",\n//     path: \"/pages/template-library/template-library\",\n//   },\n// ]);\n\nconst paymentActions = ref([\n  {\n    icon: \"order\",\n    text: \"待支付\",\n    path: \"/pages/payment/to-pay\",\n    customPrefix: \"uvicon\",\n  },\n  { icon: \"order\", text: \"发票申请\", path: \"/pages/invoice/apply\" },\n  { icon: \"coupon\", text: \"我的返款\", path: \"/pages/refund/my-refunds\" },\n  { icon: \"tags\", text: \"税金凭证\", path: \"/pages/tax-voucher/tax-voucher\" },\n  { icon: \"bag\", text: \"我的钱包\", path: \"/pages/wallet/my-wallet\" },\n]);\n\nconst handleActionClick = (item) => {\n  if (item.path) {\n    uni.navigateTo({ url: item.path });\n  } else {\n    uni.showToast({ title: `${item.text} 功能暂未开放`, icon: \"none\" });\n  }\n};\n\nconst logout = () => {\n  uni.showModal({\n    title: \"提示\",\n    content: \"确定退出登录吗？\",\n    success: (res) => {\n      if (res.confirm) {\n        userStore.logout();\n        uni.navigateTo({ url: \"/pages/login/login\" });\n      }\n    },\n  });\n};\nconst goToLogin = () => {\n  uni.navigateTo({ url: \"/pages/login/login\" });\n};\nconst goToUpgrade = () => {\n  uni.navigateTo({ url: \"/pages/member-upgrade/member-upgrade\" });\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.user-page-container {\n  /* 纹理背景 */\n  // 方式一：使用图片 (假设你有一张名为 texture-bg.png 的细微纹理图片放在 static/images/ 目录下)\n  // background-image: url('/static/images/texture-bg.png');\n  // background-repeat: repeat;\n  // background-size: auto; // 或者指定大小，如 50px 50px\n\n  // 方式二：使用渐变模拟 (如果不想用图片，可以用非常淡的线性或径向渐变)\n  //   background-color: #f4f6f8; // 一个非常浅的灰色作为底色\n  background-image: linear-gradient(\n    45deg,\n    rgba(0, 0, 0, 0.01) 25%,\n    transparent 25%,\n    transparent 50%,\n    rgba(0, 0, 0, 0.01) 50%,\n    rgba(0, 0, 0, 0.01) 75%,\n    transparent 75%,\n    transparent\n  );\n  background-size: 30px 30px; // 调整大小控制纹理密度\n  padding: 15px;\n  box-sizing: border-box;\n}\n\n.user-header-card {\n  background-color: #fff;\n  padding: 20px 15px;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);\n  margin-bottom: 15px;\n  position: relative;\n}\n\n.user-info {\n  display: flex;\n  align-items: center;\n  .user-type {\n    display: flex;\n    align-items: center;\n    margin-left: 10px;\n    .user-type-text {\n      font-size: 12px;\n      color: #909399;\n    }\n  }\n}\n\n.avatar {\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  margin-right: 15px;\n  background-color: #eee; // 头像加载前的占位符颜色\n}\n\n.username {\n  font-size: 20px;\n  font-weight: bold;\n  color: #333;\n}\n\n.member-center-link {\n  position: absolute;\n  top: 20px;\n  right: 15px;\n  font-size: 13px;\n  color: #909399;\n  display: flex;\n  align-items: center;\n}\n\n.user-stats {\n  display: flex;\n  justify-content: space-around;\n  text-align: center;\n}\n\n.stat-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  flex: 1;\n}\n\n.stat-value {\n  font-size: 18px;\n  font-weight: bold;\n  color: #333;\n  margin-bottom: 4px;\n}\n\n.stat-label {\n  font-size: 12px;\n  color: #666;\n}\n\n.membership-banner-card {\n  background: linear-gradient(to right, #f9ae3d, #f7cb72);\n  color: #fff;\n  padding: 15px;\n  border-radius: 10px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  box-shadow: 0 4px 10px rgba(249, 174, 61, 0.2);\n}\n.membership-info {\n  display: flex;\n  align-items: center;\n  .membership-title {\n    font-size: 16px;\n    font-weight: bold;\n    margin-left: 8px;\n    color: #4e3607;\n  }\n  .membership-perks {\n    font-size: 12px;\n    margin-left: 10px;\n    color: #7a561a;\n  }\n}\n\n.upgrade-button {\n  background-color: #4e3607;\n  color: #f3ca7e;\n  border-radius: 15px;\n  padding: 0 12px;\n  height: 28px;\n  line-height: 28px;\n  font-size: 13px;\n  border: none; // 去掉uv-button的默认边框\n  &:after {\n    // 去掉微信小程序按钮的默认边框\n    border: none;\n  }\n}\n\n.section-card {\n  background-color: #fff;\n  padding: 15px 10px;\n  border-radius: 12px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);\n  margin-bottom: 15px;\n}\n.section-title-bar {\n  margin-bottom: 15px;\n  padding-left: 5px; // 与宫格内容对齐\n}\n.section-title {\n  font-size: 16px;\n  font-weight: bold;\n  color: #333;\n}\n\n.grid-text {\n  font-size: 12px;\n  color: #333;\n  padding: 10rpx 0 20rpx 0rpx;\n}\n\n/* 积分活动特殊样式 */\n.points-grid .uv-grid-item {\n  padding-bottom: 10px !important; // 确保uv-grid-item内部样式被覆盖\n}\n.points-activity-item {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  text-align: center;\n  width: 100%;\n\n  .activity-title-row {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 2px;\n  }\n  .activity-main-title {\n    font-size: 13px;\n    font-weight: 500;\n    color: #333;\n  }\n  .activity-tag {\n    font-size: 10px;\n    padding: 1px 4px;\n    border-radius: 3px;\n    margin-left: 4px;\n    font-weight: bold;\n  }\n\n  .activity-subtitle {\n    font-size: 10px;\n    color: #999;\n    margin-bottom: 5px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    width: 90%; // 防止过长文字换行\n  }\n  .activity-image {\n    width: 30px;\n    height: 30px;\n  }\n}\n</style>\n","import MiniProgramPage from '/Users/lijinmu/Documents/HBuilderProjects/mallJnmUni/pages/user/user.vue'\nwx.createPage(MiniProgramPage)"],"names":["useUserStore","computed","uni","ref"],"mappings":";;;;;;;;;;;;;;;;;;;AAoHA,MAAM,YAAY;;;;AAzBlB,UAAM,YAAYA,aAAY,aAAA;AAC9B,UAAM,aAAaC,cAAQ,SAAC,MAAM,UAAU,OAAO;AACnD,UAAM,cAAcA,cAAQ,SAAC,MAAM,UAAU,WAAW;AACxD,UAAM,YAAYA,cAAQ,SAAC,MAAM,UAAU,QAAQ;AACnD,UAAM,YAAYC,cAAAA,MAAI,KAAK,UAAS,EAAG;AACvC,UAAM,eAAeA,cAAAA,MAAI,KAAK,UAAS,EAAG;AAE1C,UAAM,WAAWD,cAAQ,SAAC,MAAM;;AAC9B,UAAI,WAAW,OAAO;AACpB,iBAAO,iBAAY,UAAZ,mBAAmB,SAAQ;AAAA,MACnC;AACD,aAAO;AAAA,IACT,CAAC;AACD,UAAM,WAAWA,cAAQ,SAAC,MAAM;AAC9B,UAAI,WAAW,OAAO;AACpB,YAAI,UAAU,MAAM,SAAS,OAAO,GAAG;AACrC,iBAAO;AAAA,QACR,WAAU,UAAU,MAAM,SAAS,UAAU,GAAG;AAC/C,iBAAO;AAAA,QACb,OAAW;AACL,iBAAO;AAAA,QACR;AAAA,MACF;AACD,aAAO;AAAA,IACT,CAAC;AAkDD,UAAM,iBAAiBE,cAAAA,IAAI;AAAA,MACzB;AAAA,QACE,MAAM;AAAA,QACN,MAAM;AAAA,QACN,MAAM;AAAA,QACN,cAAc;AAAA,MACf;AAAA,MACD,EAAE,MAAM,SAAS,MAAM,QAAQ,MAAM,uBAAwB;AAAA,MAC7D,EAAE,MAAM,UAAU,MAAM,QAAQ,MAAM,2BAA4B;AAAA,MAClE,EAAE,MAAM,QAAQ,MAAM,QAAQ,MAAM,iCAAkC;AAAA,MACtE,EAAE,MAAM,OAAO,MAAM,QAAQ,MAAM,0BAA2B;AAAA,IAChE,CAAC;AAED,UAAM,oBAAoB,CAAC,SAAS;AAClC,UAAI,KAAK,MAAM;AACbD,sBAAG,MAAC,WAAW,EAAE,KAAK,KAAK,KAAM,CAAA;AAAA,MACrC,OAAS;AACLA,sBAAAA,MAAI,UAAU,EAAE,OAAO,GAAG,KAAK,IAAI,WAAW,MAAM,OAAQ,CAAA;AAAA,MAC7D;AAAA,IACH;AAEA,UAAM,SAAS,MAAM;AACnBA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,SAAS;AAAA,QACT,SAAS,CAAC,QAAQ;AAChB,cAAI,IAAI,SAAS;AACf,sBAAU,OAAM;AAChBA,0BAAAA,MAAI,WAAW,EAAE,KAAK,qBAAsB,CAAA;AAAA,UAC7C;AAAA,QACF;AAAA,MACL,CAAG;AAAA,IACH;AACA,UAAM,YAAY,MAAM;AACtBA,oBAAAA,MAAI,WAAW,EAAE,KAAK,qBAAsB,CAAA;AAAA,IAC9C;AACA,UAAM,cAAc,MAAM;AACxBA,oBAAAA,MAAI,WAAW,EAAE,KAAK,uCAAwC,CAAA;AAAA,IAChE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1MA,GAAG,WAAW,eAAe;"}